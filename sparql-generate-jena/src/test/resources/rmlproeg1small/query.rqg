BASE <http://example.com/>  
PREFIX iter: <http://w3id.org/sparql-generate/iter/>
PREFIX fn: <http://w3id.org/sparql-generate/fn/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
PREFIX mail: <http://example.com/mail#>
PREFIX note: <http://example.com/note/>
PREFIX ex: <http://example.com/>

GENERATE { 
    <http://example.com/note/{ fn:XPath(?note,"/note/@id" }>
            a mail:note;
            mail:from ?{ fn:XPath(?note,"/note/from/text()") };
            mail:to ?{ fn:XPath(?note,"/note/to/text()"  ) };
            mail:heading ?{ fn:XPath(?note,"/note/heading/text()"  ) };
            mail:body ?{ fn:XPath(?note,"/note/body/text()"  ) } ;
            mail:when <http://example.com/DateTime/{ ?day }/{ ?month }/{ ?year}> .

    <http://example.com/DateTime/{ ?day }/{ ?month }/{ ?year}>
            a ex:DateTime;
            ex:day "{ ?day }"^^xsd:gDay ;
            ex:month "{ ?month) }"^^xsd:gMonth ;
            ex:year "{ ?year }"^^xsd:gYear .  

}
SOURCE <http://example.com/example1.xml> AS ?source
ITERATOR iter:XPath(?source, "//note" ) AS ?note
WHERE {
     BIND( fn:XPath(?note,"/note/@day" ) AS ?day )
     BIND( fn:XPath(?note,"/note/@month" ) AS ?month )
     BIND( fn:XPath(?note,"/note/@year" ) AS ?year )
}